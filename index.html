<!DOCTYPE html>

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <title>frequency trainer</title>
  <link href="https://fonts.googleapis.com/css?family=Montserrat:900" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="css/default.css" />
  <script src="toneGenerator.js"></script>
  <script src="showResult.js"></script>
</head>
<body>

  <table class="geq">
    <tr class="geq">
      <td class="geq" colspan="4">
        <h1 class="align-center">Frequency Trainer</h1>
        <hr />
      </td>
    </tr>
    <tr>
      <td class="geq">
        100 Hz <br />
        <img class="geqfader" frequency="100" src="img/fader.png" /><br />
        100 Hz
      </td>
      <td class="geq">
        400 Hz <br />
        <img class="geqfader" frequency="400" src="img/fader.png" /><br />
        400 Hz
      </td>
      <td class="geq">
        1.6 kHz <br />
        <img class="geqfader" frequency="1600" src="img/fader.png" /><br />
        1.6 kHz
      </td>
      <td class="geq">
        6.3 kHz <br />
        <img class="geqfader" frequency="6300" src="img/fader.png" /><br />
        6.3 kHz
      </td>
    </tr>
    <tr>
      <td colspan="4" class="geq">
        <hr />
      </td>
    </tr>
    <tr>
      <td colspan="4" class="geq">
        Volume:<br />
        <br />
        <input id="volume-slider" type="range" min="0" max="20" value="1" step="1" class="volume-slider"></input><br />
        <br />
        <button type="button" id="play-button" style="font-size: 20px;">Start</button>
        <button type="button" id="stop-button" style="font-size: 20px;">Stop</button><br />
        <br />
        <button type="button" onclick="window.location.href=window.location.href" style="font-size: 20px;">Next</button>
      </td>
    </tr>
  </table>
  <script>
  // Pick a frequency and generate the tone
  const toneFrequency = createRandomFrequency('easy');
  toneGenerator(toneFrequency).play();

  // Play and stop buttons
  const playButton = document.getElementById('play-button');
  playButton.addEventListener('click', function(){
    toneGenerator(toneFrequency).play();
  });
  const stopButton = document.getElementById('stop-button');
  stopButton.addEventListener('click', function(){
    toneGenerator(toneFrequency).stop();
  });

  // Show result when user clicks on a fader
  let geqFaders = document.getElementsByClassName('geqfader');
  for(let geqFader of geqFaders){
    geqFader.addEventListener('click', function(e) {
      showResult(e.target.getAttribute('frequency'), toneFrequency);
    });
  }

  </script>

</body>
</html>
