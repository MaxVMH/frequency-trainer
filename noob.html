<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <title>frequency trainer</title>
  <link href="https://fonts.googleapis.com/css?family=Montserrat:100" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="css/default.css" />
</head>
<body>

  <div class="leftmenu">
    <h1>menu</h1>
    <hr />
    <h3><a href="index.html">home</a></h3>
    <br />
    <h3>difficulty</h3>
    <a href="noob.html">noob</a><br />
    <a href="#">casual</a><br />
    <a href="#">pro</a><br />
    <a href="#">hardcore</a><br />
  </div>

  <table class="geq">
    <tr>
      <td class="geq" colspan="4">
        <h1 class="align-left">frequency trainer</h1>
        <hr />
      </td>
    </tr>
    <td class="geq">
      100 Hz <br />
      <img src="img/fader.png" height="50%" /><br />
      100 Hz
    </td>
    <td class="geq">
      400 Hz <br />
      <img src="img/fader.png" height="50%" /><br />
      400 Hz
    </td>
    <td class="geq">
      1.6 kHz <br />
      <img src="img/fader.png" height="50%" /><br />
      1.6 kHz
    </td>
    <td class="geq">
      6.3 kHz <br />
      <img src="img/fader.png" height="50%" /><br />
      6.3 kHz
    </td>
  </tr>
  <tr>
    <td colspan="4" class="geq">
      <hr />
    </td>
    <tr>
      <td colspan="4" class="geq">
        Volume:<br />
        <input id="volume-slider" type="range" min="0" max="10" value="5" step="1" class="volume-slider"></input>
      </td>
    </tr>
  </table>

  <script>
  // create web audio api context
  var audioCtx = new AudioContext();

  // create oscillator (tone) and gain (volume) node
  var tone = audioCtx.createOscillator();
  var volume = audioCtx.createGain();

  // create array of frequency values
  var frequencies = ["100", "400", "1600", "6300"];
  // pick a random frequency
  var frequency = frequencies[Math.floor(Math.random() * frequencies.length)];

  // set oscillator type (sine, square, sawtooth or triangle)
  tone.type = 'sine';
  // set oscillator frequency in Hz
  tone.frequency.value = frequency;

  // set gain volume default (above 1 will clip)
  volume.gain.value = 0.5;
  // set listener for volume slider
  var volumeslider = document.getElementById("volume-slider");
  // set gain volume
  volumeslider.addEventListener("input", function()
  {
    volume.gain.value = this.value/10;
  });

  // set tone destination to go through volume
  tone.connect(volume);
  // set volume destination to output
  volume.connect(audioCtx.destination);

  // start oscillator x seconds after timestamp
  tone.start(1);
  // stop oscillator x seconds after timestamp
  tone.stop(6);
  </script>


</body>
</html>
